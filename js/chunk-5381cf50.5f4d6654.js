(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5381cf50"],{"00c7":function(t,e,n){"use strict";var r=n("4636"),o=n.n(r);o.a},"08e9":function(t,e){t.exports="data:image/png;base64,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"},"159b":function(t,e,n){var r=n("da84"),o=n("fdbc"),c=n("17c2"),a=n("9112");for(var i in o){var s=r[i],u=s&&s.prototype;if(u&&u.forEach!==c)try{a(u,"forEach",c)}catch(l){u.forEach=c}}},1729:function(t,e,n){},"17c2":function(t,e,n){"use strict";var r=n("b727").forEach,o=n("b301");t.exports=o("forEach")?function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1ee3":function(t,e,n){},"230c":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"article-container",staticClass:"article-container page-container"},[n("van-nav-bar",{staticClass:"page-navbar",attrs:{fixed:"",title:"文章详情","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),t.loading?n("loading-page"):t.article.title?[n("div",{staticClass:"detail"},[n("h3",[t._v(t._s(t.article.title))]),n("article-auth",{attrs:{article:t.article}}),n("div",{ref:"article-content",staticClass:"markdown-body",domProps:{innerHTML:t._s(t.article.content)}}),n("van-divider",[t._v("正文结束")])],1),n("van-cell",{ref:"comment-area-tip",attrs:{title:"全部评论",border:!1}}),n("comment-list",{attrs:{source:t.articleId,"total-count":t.commentCount},on:{"update:totalCount":function(e){t.commentCount=e},"update:total-count":function(e){t.commentCount=e},"click-reply":t.onReplyShow},model:{value:t.articleComments,callback:function(e){t.articleComments=e},expression:"articleComments"}}),n("article-footer",{attrs:{article:t.article,"comment-count":t.commentCount},on:{"click-write":function(e){t.isPostCommentShow=!0},"click-comment":t.onCommentClick}})]:n("error-page",{on:{"btn-click":t.loadArticle}}),n("van-popup",{attrs:{position:"bottom","get-container":"body"},model:{value:t.isPostCommentShow,callback:function(e){t.isPostCommentShow=e},expression:"isPostCommentShow"}},[n("post-comment",{attrs:{target:t.articleId},on:{"post-success":t.onPostSuccess}})],1),n("van-popup",{style:{height:"90%"},attrs:{position:"bottom","get-container":"body"},model:{value:t.isReplyShow,callback:function(e){t.isReplyShow=e},expression:"isReplyShow"}},[t.isReplyShow?n("comment-reply",{attrs:{"article-id":t.articleId,comment:t.currentReplyComment},on:{"click-close":function(e){t.isReplyShow=!1}}}):t._e()],1)],2)},o=[],c=(n("a630"),n("d81d"),n("a9e3"),n("3ca3"),n("159b"),n("96cf"),n("1da1")),a=n("2423"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"author",staticClass:"author",on:{click:function(e){t.$router.push({name:"user",params:{userId:t.article.aut_id.toString()}})}}},[n("div",{staticClass:"base-info"},[n("van-image",{attrs:{round:"",width:"1rem",height:"1rem",fit:"cover",src:t.article.aut_photo}}),n("div",{staticClass:"text"},[n("p",{staticClass:"name"},[t._v(t._s(t.article.aut_name))]),n("p",{staticClass:"time"},[t._v(t._s(t._f("relativeTime")(t.article.pubdate)))])])],1),t.user&&t.article.aut_id===t.user.user_id?t._e():n("follow-user",{staticStyle:{width:"30%"},attrs:{"user-id":t.article.aut_id,round:""},model:{value:t.article.is_followed,callback:function(e){t.$set(t.article,"is_followed",e)},expression:"article.is_followed"}})],1)},s=[],u=(n("a4d3"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("ade3")),l=n("f50e"),m=n("2f62");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(u["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p={name:"ArticleAuth",components:{FollowUser:l["a"]},props:{article:{type:Object,required:!0}},data:function(){return{}},computed:d({},Object(m["b"])(["user"])),watch:{},created:function(){},methods:{}},h=p,v=(n("8e83"),n("2877")),b=Object(v["a"])(h,i,s,!1,null,"5a535286",null),g=b.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-loading",t._b({staticClass:"loading",attrs:{color:"#1989fa",vertical:""}},"van-loading",t.$attrs,!1),[t._t("default",[t._v("加载中...")])],2)},y=[],w={name:"PageLoading",components:{},props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},k=w,x=(n("8f16"),Object(v["a"])(k,O,y,!1,null,"01349219",null)),C=x.exports,A=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"error-page"},[r("img",{attrs:{src:n("08e9"),alt:"no-network"}}),r("p",{staticClass:"text"},[t._v("亲，网络不给力哦~")]),r("van-button",{staticClass:"btn",attrs:{type:"default",size:"small"},on:{click:function(e){return t.$emit("btn-click")}}},[t._v("点击重试")])],1)},j=[],_={name:"ErrorPage",components:{},props:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},S=_,E=(n("dd62"),Object(v["a"])(S,A,j,!1,null,"fe076b18",null)),I=E.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer"},[n("van-button",{staticClass:"write-btn",attrs:{type:"default",round:"",size:"small"},on:{click:function(e){return t.$emit("click-write")}}},[t._v("写评论")]),n("van-icon",{staticClass:"comment-icon",attrs:{name:"comment-o",info:t.commentCount},on:{click:function(e){return t.$emit("click-comment")}}}),n("van-icon",{attrs:{color:t.article.is_collected?"orange":"",name:t.article.is_collected?"star":"star-o"},on:{click:t.onCollect}}),n("van-icon",{attrs:{color:1===t.article.attitude?"#e5645f":"",name:1===t.article.attitude?"good-job":"good-job-o"},on:{click:t.onLike}}),n("van-icon",{staticClass:"share-icon",attrs:{name:"share"}})],1)},P=[],R=(n("d3b7"),n("25f0"),{name:"ArticleFooter",components:{},props:{article:{type:Object,required:!0},commentCount:{type:Number,default:0}},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{onCollect:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e=this.article,!e.is_collected){t.next=7;break}return t.next=5,Object(a["c"])(e.art_id.toString());case 5:t.next=9;break;case 7:return t.next=9,Object(a["a"])(e.art_id.toString());case 9:e.is_collected=!e.is_collected,this.$toast.success(e.is_collected?"收藏成功":"取消收藏"),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log(t.t0),this.$toast.fail("操作失败");case 17:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}(),onLike:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e=this.article,1!==e.attitude){t.next=7;break}return t.next=5,Object(a["d"])(e.art_id.toString());case 5:t.next=9;break;case 7:return t.next=9,Object(a["b"])(e.art_id.toString());case 9:e.attitude=-1===e.attitude?1:-1,this.$toast.success(1===e.attitude?"点赞成功":"取消点赞"),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log(t.t0),this.$toast.fail("操作失败");case 17:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(){return t.apply(this,arguments)}return e}()}}),z=R,L=(n("9f54"),Object(v["a"])(z,T,P,!1,null,"0e9452dd",null)),F=L.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-list",{attrs:{finished:t.finished,"finished-text":"已展示所有评论","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.value,(function(e,r){return n("comment-item",{key:r,attrs:{comment:e},on:{"click-reply":function(n){return t.$emit("click-reply",e)}}})})),1)},N=[],B=(n("fb6a"),n("2909")),D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-cell",{staticClass:"comment-item"},[n("van-image",{staticStyle:{"margin-right":"10px"},attrs:{slot:"icon",round:"",width:"30",height:"30",src:t.comment.aut_photo},slot:"icon"}),n("span",{staticStyle:{color:"#466b9d"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.comment.aut_name))]),n("div",{attrs:{slot:"label"},slot:"label"},[n("p",{staticStyle:{color:"#363636"}},[t._v(t._s(t.comment.content))]),n("p",[n("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(t._f("relativeTime")(t.comment.pubdate)))]),t.reply?n("van-button",{attrs:{size:"mini",type:"default"},on:{click:function(e){return t.$emit("click-reply")}}},[t._v("回复 "+t._s(t.comment.reply_count))]):t._e()],1)]),n("div",{staticClass:"like-container",attrs:{slot:"right-icon"},slot:"right-icon"},[n("van-icon",{attrs:{color:t.comment.is_liking?"#e5645f":"",name:t.comment.is_liking?"good-job":"good-job-o"},on:{click:function(e){return t.onCommentLike(t.comment)}}}),n("span",[t._v(t._s(t.comment.like_count?t.comment.like_count:"赞"))])],1)],1)},Y=[],G=n("b775");function V(t){return Object(G["a"])({method:"GET",url:"/app/v1_0/comments",params:t})}function J(t){return Object(G["a"])({method:"POST",url:"/app/v1_0/comments",data:t})}function M(t){return Object(G["a"])({method:"POST",url:"/app/v1_0/comment/likings",data:{target:t}})}function U(t){return Object(G["a"])({method:"DELETE",url:"/app/v1_0/comment/likings/".concat(t)})}var H={name:"CommentItem",components:{},props:{comment:{type:Object,required:!0},reply:{type:Boolean,default:!0}},data:function(){return{}},computed:{},watch:{},created:function(){},methods:{onCommentLike:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.is_liking){t.next=6;break}return t.next=4,U(e.com_id);case 4:t.next=8;break;case 6:return t.next=8,M(e.com_id);case 8:e.is_liking=!e.is_liking,e.like_count+=e.is_liking?1:-1,this.$toast.success(e.is_liking?"点赞成功":"取消点赞"),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log(t.t0),this.$toast.fail("操作失败");case 17:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(e){return t.apply(this,arguments)}return e}()}},q=H,K=(n("ff3f"),Object(v["a"])(q,D,Y,!1,null,"23474871",null)),Q=K.exports,X={name:"CommentList",components:{CommentItem:Q},props:{source:{type:[String,Number,Object],required:!0},value:{type:Array,default:function(){return[]}},totalCount:{type:Number},isComment:{type:Boolean,default:!1}},data:function(){return{list:[],loading:!1,finished:!1,offset:null,limit:10}},computed:{},watch:{},created:function(){this.onLoad()},methods:{onLoad:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,n,r,o,c,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V({type:this.isComment?"c":"a",source:this.source.toString(),offset:this.offset,limit:this.limit});case 2:e=t.sent,n=e.data,r=n.data,o=r.results,c=r.total_count,a=this.value.slice(),a.push.apply(a,Object(B["a"])(o)),this.$emit("input",a),this.$emit("update:total-count",c),this.loading=!1,o.length?this.offset=n.data.last_id:this.finished=!0;case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},W=X,$=Object(v["a"])(W,Z,N,!1,null,"16ea65bc",null),tt=$.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-row",{staticClass:"post-comment",attrs:{type:"flex",align:"center"}},[n("van-col",{attrs:{span:"20"}},[n("van-field",{ref:"post-input",attrs:{rows:"2",autosize:"",type:"textarea",maxlength:"50",placeholder:t.inputPlaceholder,"show-word-limit":""},model:{value:t.content,callback:function(e){t.content="string"===typeof e?e.trim():e},expression:"content"}})],1),n("van-col",{staticClass:"post-btn",style:{color:t.content.length?"#4a8ecf":"#666"},attrs:{span:"4"},on:{click:t.onPostComment}},[t._v("发布")])],1)},nt=[],rt=(n("99af"),{name:"PostComment",components:{},props:{target:{type:[Number,Object,String],required:!0},articleId:{type:[Number,Object,String],default:null},replyTo:{type:Object,default:null}},data:function(){return{content:""}},computed:{inputPlaceholder:function(){var t=this.replyTo;return t?"回复 ".concat(t.aut_name):"优质评论将会被优先展示"}},watch:{},created:function(){},methods:{onPostComment:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,n,r,o,c,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$toast.loading({duration:0,forbidClick:!0,message:"发布中"}),t.prev=1,e=this.content,n=this.replyTo,e){t.next=5;break}return t.abrupt("return");case 5:return n&&(e+="//@".concat(n.aut_name,": ").concat(n.content)),r=this.articleId?this.articleId.toString():null,t.next=9,J({target:this.target.toString(),content:e,art_id:r});case 9:o=t.sent,c=o.data,a=c.data.new_obj,a.is_liking=!1,this.$emit("post-success",a),this.$toast.success("发布成功"),this.content="",t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](1),console.log("发布失败",t.t0),this.$toast.fail("发布失败");case 22:case"end":return t.stop()}}),t,this,[[1,18]])})));function e(){return t.apply(this,arguments)}return e}()}}),ot=rt,ct=(n("ea14"),Object(v["a"])(ot,et,nt,!1,null,"30f00fe9",null)),at=ct.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-container"},[n("van-nav-bar",{staticClass:"nav-bar",attrs:{title:t.commentCount+"条回复"}},[n("van-icon",{attrs:{slot:"left",name:"cross"},on:{click:function(e){return t.$emit("click-close")}},slot:"left"})],1),n("comment-item",{attrs:{comment:t.comment,reply:!1}}),n("van-cell",{attrs:{title:"全部评论",border:!1}}),n("comment-list",{attrs:{source:t.comment.com_id,"is-comment":"","total-count":t.commentCount},on:{"update:totalCount":function(e){t.commentCount=e},"update:total-count":function(e){t.commentCount=e},"click-reply":t.onClickReply},model:{value:t.comments,callback:function(e){t.comments=e},expression:"comments"}}),n("div",{staticClass:"footer"},[n("van-button",{staticClass:"write-btn",attrs:{type:"default",round:"",size:"small"},on:{click:t.onWriteClick}},[t._v("写评论")]),n("van-icon",{attrs:{color:t.comment.is_liking?"#e5645f":"",name:t.comment.is_liking?"good-job":"good-job-o"},on:{click:function(e){return t.onCommentLike(t.comment)}}})],1),n("van-popup",{staticClass:"post-comment-popup",attrs:{position:"bottom"},model:{value:t.isPostShow,callback:function(e){t.isPostShow=e},expression:"isPostShow"}},[n("post-comment",{attrs:{target:t.target,"article-id":t.articleId,"reply-to":t.replyTo},on:{"post-success":t.onPostSuccess}})],1)],1)},st=[],ut={name:"CommentReply",components:{CommentItem:Q,CommentList:tt,PostComment:at},props:{comment:{type:Object,required:!0},articleId:{type:[Number,String,Object],required:!0}},data:function(){return{comments:[],commentCount:0,isPostShow:!1,target:this.comment.com_id,replyTo:null}},computed:{},watch:{},created:function(){},methods:{onPostSuccess:function(t){this.comments.unshift(t),this.commentCount++,this.comment.reply_count++,this.isPostShow=!1},onClickReply:function(t){this.target=t.com_id,this.replyTo=t,this.isPostShow=!0},onWriteClick:function(){this.target=this.comment.com_id,this.replyTo=null,this.isPostShow=!0},onCommentLike:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!e.is_liking){t.next=6;break}return t.next=4,U(e.com_id);case 4:t.next=8;break;case 6:return t.next=8,M(e.com_id);case 8:e.is_liking=!e.is_liking,e.like_count+=e.is_liking?1:-1,this.$toast.success(e.is_liking?"点赞成功":"取消点赞"),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log(t.t0),this.$toast.fail("操作失败");case 17:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(e){return t.apply(this,arguments)}return e}()}},lt=ut,mt=(n("e4c5"),Object(v["a"])(lt,it,st,!1,null,"682eb086",null)),ft=mt.exports,dt=n("28a2"),pt={name:"ArticlePage",props:{articleId:{type:[String,Number],required:!0}},components:{ArticleAuth:g,LoadingPage:C,ErrorPage:I,ArticleFooter:F,CommentList:tt,PostComment:at,CommentReply:ft},data:function(){return{loading:!0,article:{},currentReplyComment:{},isReplyShow:!1,isPostCommentShow:!1,articleComments:[],commentCount:0}},created:function(){this.loadArticle()},mounted:function(){},methods:{loadArticle:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,Object(a["e"])(this.articleId);case 4:e=t.sent,this.article=e.data.data,setTimeout((function(){n.addImagePreview()}),0),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0),this.$toast.fail("获取数据失败");case 13:this.loading=!1;case 14:case"end":return t.stop()}}),t,this,[[1,9]])})));function e(){return t.apply(this,arguments)}return e}(),onReplyShow:function(t){this.currentReplyComment=t,this.isReplyShow=!0},onPostSuccess:function(t){this.articleComments.unshift(t),this.commentCount++,this.isPostCommentShow=!1},addImagePreview:function(){var t=this.$refs["article-content"].querySelectorAll("img"),e=Array.from(t).map((function(t){return t.src}));t.forEach((function(t,n){t.addEventListener("click",(function(){return Object(dt["a"])({images:e,startPosition:n})}))}))},onCommentClick:function(){var t=this.$refs["article-container"],e=this.$refs["comment-area-tip"];t.scrollTop=e.offsetTop-50}}},ht=pt,vt=(n("00c7"),Object(v["a"])(ht,r,o,!1,null,"ca49cb22",null));e["default"]=vt.exports},2423:function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"e",(function(){return c})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return i})),n.d(e,"g",(function(){return s})),n.d(e,"h",(function(){return u})),n.d(e,"i",(function(){return l})),n.d(e,"j",(function(){return m})),n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return d}));var r=n("b775");function o(t){return Object(r["a"])({method:"GET",url:"/app/v1_1/articles",params:t})}function c(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/articles/".concat(t)})}function a(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/article/likings",data:{target:t}})}function i(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/article/likings/".concat(t)})}function s(t,e){return Object(r["a"])({method:"GET",url:"/app/v1_0/users/".concat(t,"/articles"),params:e})}function u(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/articles",params:t})}function l(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/article/collections",params:t})}function m(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/histories",params:t})}function f(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/article/collections",data:{target:t}})}function d(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/article/collections/".concat(t)})}},2909:function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("e260"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0");function o(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(t){return r(t)||o(t)||c()}n.d(e,"a",(function(){return a}))},"354e":function(t,e,n){},4636:function(t,e,n){},"4df4":function(t,e,n){"use strict";var r=n("f8c2"),o=n("7b0b"),c=n("9bdd"),a=n("e95a"),i=n("50c4"),s=n("8418"),u=n("35a1");t.exports=function(t){var e,n,l,m,f,d=o(t),p="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,b=void 0!==v,g=0,O=u(d);if(b&&(v=r(v,h>2?arguments[2]:void 0,2)),void 0==O||p==Array&&a(O))for(e=i(d.length),n=new p(e);e>g;g++)s(n,g,b?v(d[g],g):d[g]);else for(m=O.call(d),f=m.next,n=new p;!(l=f.call(m)).done;g++)s(n,g,b?c(m,v,[l.value,g],!0):l.value);return n.length=g,n}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),o=n("5899"),c="["+o+"]",a=RegExp("^"+c+c+"*"),i=RegExp(c+c+"*$"),s=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(a,"")),2&t&&(n=n.replace(i,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},"5df9":function(t,e,n){},7156:function(t,e,n){var r=n("861d"),o=n("d2bb");t.exports=function(t,e,n){var c,a;return o&&"function"==typeof(c=e.constructor)&&c!==n&&r(a=c.prototype)&&a!==n.prototype&&o(t,a),t}},"748e":function(t,e,n){},"8e83":function(t,e,n){"use strict";var r=n("748e"),o=n.n(r);o.a},"8f16":function(t,e,n){"use strict";var r=n("5df9"),o=n.n(r);o.a},"954d":function(t,e,n){},"99af":function(t,e,n){"use strict";var r=n("23e7"),o=n("d039"),c=n("e8b5"),a=n("861d"),i=n("7b0b"),s=n("50c4"),u=n("8418"),l=n("65f0"),m=n("1dde"),f=n("b622"),d=n("60ae"),p=f("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",b=d>=51||!o((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),g=m("concat"),O=function(t){if(!a(t))return!1;var e=t[p];return void 0!==e?!!e:c(t)},y=!b||!g;r({target:"Array",proto:!0,forced:y},{concat:function(t){var e,n,r,o,c,a=i(this),m=l(a,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(c=-1===e?a:arguments[e],O(c)){if(o=s(c.length),f+o>h)throw TypeError(v);for(n=0;n<o;n++,f++)n in c&&u(m,f,c[n])}else{if(f>=h)throw TypeError(v);u(m,f++,c)}return m.length=f,m}})},"9f54":function(t,e,n){"use strict";var r=n("954d"),o=n.n(r);o.a},a630:function(t,e,n){var r=n("23e7"),o=n("4df4"),c=n("1c7e"),a=!c((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:a},{from:o})},a9e3:function(t,e,n){"use strict";var r=n("83ab"),o=n("da84"),c=n("94ca"),a=n("6eeb"),i=n("5135"),s=n("c6b6"),u=n("7156"),l=n("c04e"),m=n("d039"),f=n("7c73"),d=n("241c").f,p=n("06cf").f,h=n("9bf2").f,v=n("58a8").trim,b="Number",g=o[b],O=g.prototype,y=s(f(O))==b,w=function(t){var e,n,r,o,c,a,i,s,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=v(u),e=u.charCodeAt(0),43===e||45===e){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(c=u.slice(2),a=c.length,i=0;i<a;i++)if(s=c.charCodeAt(i),s<48||s>o)return NaN;return parseInt(c,r)}return+u};if(c(b,!g(" 0o1")||!g("0b1")||g("+0x1"))){for(var k,x=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof x&&(y?m((function(){O.valueOf.call(n)})):s(n)!=b)?u(new g(w(e)),n,x):w(e)},C=r?d(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),A=0;C.length>A;A++)i(g,k=C[A])&&!i(x,k)&&h(x,k,p(g,k));x.prototype=O,O.constructor=x,a(o,b,x)}},ade3:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},b64b:function(t,e,n){var r=n("23e7"),o=n("7b0b"),c=n("df75"),a=n("d039"),i=a((function(){c(1)}));r({target:"Object",stat:!0,forced:i},{keys:function(t){return c(o(t))}})},c24f:function(t,e,n){"use strict";n.d(e,"g",(function(){return o})),n.d(e,"f",(function(){return c})),n.d(e,"a",(function(){return a})),n.d(e,"i",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"j",(function(){return l})),n.d(e,"k",(function(){return m})),n.d(e,"h",(function(){return f})),n.d(e,"e",(function(){return d})),n.d(e,"b",(function(){return p}));n("d3b7"),n("25f0");var r=n("b775");function o(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/authorizations",data:t})}function c(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/channels"})}function a(t){return Object(r["a"])({method:"POST",url:"/app/v1_0/user/followings",data:{target:t}})}function i(t){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/user/followings/".concat(t)})}function s(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user"})}function u(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/profile"})}function l(t){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:t})}function m(t){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:t})}function f(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/sms/codes/".concat(t)})}function d(t){return Object(r["a"])({method:"GET",url:"/app/v1_0/users/".concat(t)})}function p(t,e){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/followers",params:e,data:{target:t.toString()}})}},d81d:function(t,e,n){"use strict";var r=n("23e7"),o=n("b727").map,c=n("d039"),a=n("1dde"),i=a("map"),s=i&&!c((function(){[].map.call({length:-1,0:1},(function(t){throw t}))}));r({target:"Array",proto:!0,forced:!i||!s},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(t,e,n){var r=n("23e7"),o=n("83ab"),c=n("56ef"),a=n("fc6a"),i=n("06cf"),s=n("8418");r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){var e,n,r=a(t),o=i.f,u=c(r),l={},m=0;while(u.length>m)n=o(r,e=u[m++]),void 0!==n&&s(l,e,n);return l}})},dd62:function(t,e,n){"use strict";var r=n("1729"),o=n.n(r);o.a},e439:function(t,e,n){var r=n("23e7"),o=n("d039"),c=n("fc6a"),a=n("06cf").f,i=n("83ab"),s=o((function(){a(1)})),u=!i||s;r({target:"Object",stat:!0,forced:u,sham:!i},{getOwnPropertyDescriptor:function(t,e){return a(c(t),e)}})},e4c5:function(t,e,n){"use strict";var r=n("354e"),o=n.n(r);o.a},ea14:function(t,e,n){"use strict";var r=n("fd10"),o=n.n(r);o.a},f50e:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-button",t._b({attrs:{type:t.value?"default":"info",icon:t.value?"":"plus",size:"small",loading:t.loading},on:{click:function(e){return e.stopPropagation(),t.onFollow(e)}}},"van-button",t.$attrs,!1),[t._v(t._s(t.value?"已关注":"关注"))])},o=[],c=(n("a9e3"),n("96cf"),n("1da1")),a=n("c24f"),i={name:"FollowUser",components:{},props:{value:{type:Boolean},userId:{type:[Number,String,Object],required:!0}},data:function(){return{loading:!1}},computed:{},watch:{},created:function(){},methods:{onFollow:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.loading=!0,t.prev=1,!this.value){t.next=7;break}return t.next=5,Object(a["i"])(this.userId);case 5:t.next=9;break;case 7:return t.next=9,Object(a["a"])(this.userId);case 9:this.$emit("input",!this.value),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),t.t0.response&&400===t.t0.response.status&&this.$toast("你不能关注你自己");case 15:this.loading=!1;case 16:case"end":return t.stop()}}),t,this,[[1,12]])})));function e(){return t.apply(this,arguments)}return e}()}},s=i,u=n("2877"),l=Object(u["a"])(s,r,o,!1,null,"5bcdcce6",null);e["a"]=l.exports},fb6a:function(t,e,n){"use strict";var r=n("23e7"),o=n("861d"),c=n("e8b5"),a=n("23cb"),i=n("50c4"),s=n("fc6a"),u=n("8418"),l=n("1dde"),m=n("b622"),f=m("species"),d=[].slice,p=Math.max;r({target:"Array",proto:!0,forced:!l("slice")},{slice:function(t,e){var n,r,l,m=s(this),h=i(m.length),v=a(t,h),b=a(void 0===e?h:e,h);if(c(m)&&(n=m.constructor,"function"!=typeof n||n!==Array&&!c(n.prototype)?o(n)&&(n=n[f],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return d.call(m,v,b);for(r=new(void 0===n?Array:n)(p(b-v,0)),l=0;v<b;v++,l++)v in m&&u(r,l,m[v]);return r.length=l,r}})},fd10:function(t,e,n){},ff3f:function(t,e,n){"use strict";var r=n("1ee3"),o=n.n(r);o.a}}]);
//# sourceMappingURL=chunk-5381cf50.5f4d6654.js.map