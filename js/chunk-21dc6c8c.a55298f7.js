(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21dc6c8c"],{"159b":function(t,e,r){var n=r("da84"),a=r("fdbc"),i=r("17c2"),c=r("9112");for(var o in a){var s=n[o],u=s&&s.prototype;if(u&&u.forEach!==i)try{c(u,"forEach",i)}catch(l){u.forEach=i}}},"17c2":function(t,e,r){"use strict";var n=r("b727").forEach,a=r("b301");t.exports=a("forEach")?function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1bf8":function(t,e,r){},2423:function(t,e,r){"use strict";r.d(e,"f",(function(){return a})),r.d(e,"e",(function(){return i})),r.d(e,"b",(function(){return c})),r.d(e,"d",(function(){return o})),r.d(e,"g",(function(){return s})),r.d(e,"h",(function(){return u})),r.d(e,"i",(function(){return l})),r.d(e,"j",(function(){return f})),r.d(e,"a",(function(){return d})),r.d(e,"c",(function(){return p}));var n=r("b775");function a(t){return Object(n["a"])({method:"GET",url:"/app/v1_1/articles",params:t})}function i(t){return Object(n["a"])({method:"GET",url:"/app/v1_0/articles/".concat(t)})}function c(t){return Object(n["a"])({method:"POST",url:"/app/v1_0/article/likings",data:{target:t}})}function o(t){return Object(n["a"])({method:"DELETE",url:"/app/v1_0/article/likings/".concat(t)})}function s(t,e){return Object(n["a"])({method:"GET",url:"/app/v1_0/users/".concat(t,"/articles"),params:e})}function u(t){return Object(n["a"])({method:"GET",url:"/app/v1_0/user/articles",params:t})}function l(t){return Object(n["a"])({method:"GET",url:"/app/v1_0/article/collections",params:t})}function f(t){return Object(n["a"])({method:"GET",url:"/app/v1_0/user/histories",params:t})}function d(t){return Object(n["a"])({method:"POST",url:"/app/v1_0/article/collections",data:{target:t}})}function p(t){return Object(n["a"])({method:"DELETE",url:"/app/v1_0/article/collections/".concat(t)})}},2909:function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("e260"),r("d3b7"),r("25f0"),r("3ca3"),r("ddb0");function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){return n(t)||a(t)||i()}r.d(e,"a",(function(){return c}))},"2ba3":function(t,e,r){},"2c14":function(t,e,r){},"32b4":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.value,(function(e,n){return r("div",{key:n},[t._t("default",[t._v(t._s(e))],{item:e})],2)})),0)},a=[],i=(r("a9e3"),r("2909")),c=(r("96cf"),r("1da1")),o={name:"LoadingList",components:{},props:{fn:{type:Function,required:!0},value:{type:Array,default:function(){return[]}},totalCount:{type:Number}},data:function(){return{loading:!1,finished:!1,page:null,perPage:10}},computed:{},watch:{},created:function(){},methods:{onLoad:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,r,n,a,c,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fn({page:this.page,per_page:this.perPage});case 2:r=t.sent,n=r.data,a=n.data,c=a.results,o=a.total_count,(e=this.value).push.apply(e,Object(i["a"])(c)),this.$emit("update:total-count",o),this.loading=!1,c.length?this.page++:this.finished=!0;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},s=o,u=(r("9eb3"),r("2877")),l=Object(u["a"])(s,n,a,!1,null,"c47677aa",null);e["a"]=l.exports},"4cda":function(t,e,r){},"4df4":function(t,e,r){"use strict";var n=r("f8c2"),a=r("7b0b"),i=r("9bdd"),c=r("e95a"),o=r("50c4"),s=r("8418"),u=r("35a1");t.exports=function(t){var e,r,l,f,d,p=a(t),v="function"==typeof this?this:Array,b=arguments.length,h=b>1?arguments[1]:void 0,m=void 0!==h,_=0,g=u(p);if(m&&(h=n(h,b>2?arguments[2]:void 0,2)),void 0==g||v==Array&&c(g))for(e=o(p.length),r=new v(e);e>_;_++)s(r,_,m?h(p[_],_):p[_]);else for(f=g.call(p),d=f.next,r=new v;!(l=d.call(f)).done;_++)s(r,_,m?i(f,h,[l.value,_],!0):l.value);return r.length=_,r}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var n=r("1d80"),a=r("5899"),i="["+a+"]",c=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),s=function(t){return function(e){var r=String(n(e));return 1&t&&(r=r.replace(c,"")),2&t&&(r=r.replace(o,"")),r}};t.exports={start:s(1),end:s(2),trim:s(3)}},7156:function(t,e,r){var n=r("861d"),a=r("d2bb");t.exports=function(t,e,r){var i,c;return a&&"function"==typeof(i=e.constructor)&&i!==r&&n(c=i.prototype)&&c!==r.prototype&&a(t,c),t}},8112:function(t,e,r){"use strict";var n=r("2ba3"),a=r.n(n);a.a},"9eb3":function(t,e,r){"use strict";var n=r("4cda"),a=r.n(n);a.a},a630:function(t,e,r){var n=r("23e7"),a=r("4df4"),i=r("1c7e"),c=!i((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:c},{from:a})},a9e3:function(t,e,r){"use strict";var n=r("83ab"),a=r("da84"),i=r("94ca"),c=r("6eeb"),o=r("5135"),s=r("c6b6"),u=r("7156"),l=r("c04e"),f=r("d039"),d=r("7c73"),p=r("241c").f,v=r("06cf").f,b=r("9bf2").f,h=r("58a8").trim,m="Number",_=a[m],g=_.prototype,O=s(d(g))==m,j=function(t){var e,r,n,a,i,c,o,s,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=h(u),e=u.charCodeAt(0),43===e||45===e){if(r=u.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+u}for(i=u.slice(2),c=i.length,o=0;o<c;o++)if(s=i.charCodeAt(o),s<48||s>a)return NaN;return parseInt(i,n)}return+u};if(i(m,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var y,w=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof w&&(O?f((function(){g.valueOf.call(r)})):s(r)!=m)?u(new _(j(e)),r,w):j(e)},E=n?p(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;E.length>C;C++)o(_,y=E[C])&&!o(w,y)&&b(w,y,v(_,y));w.prototype=g,g.constructor=w,c(a,m,w)}},ade3:function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,"a",(function(){return n}))},b0c0:function(t,e,r){var n=r("83ab"),a=r("9bf2").f,i=Function.prototype,c=i.toString,o=/^\s*function ([^ (]*)/,s="name";!n||s in i||a(i,s,{configurable:!0,get:function(){try{return c.call(this).match(o)[1]}catch(t){return""}}})},b64b:function(t,e,r){var n=r("23e7"),a=r("7b0b"),i=r("df75"),c=r("d039"),o=c((function(){i(1)}));n({target:"Object",stat:!0,forced:o},{keys:function(t){return i(a(t))}})},b941:function(t,e,r){"use strict";var n=r("2c14"),a=r.n(n);a.a},c24f:function(t,e,r){"use strict";r.d(e,"g",(function(){return a})),r.d(e,"f",(function(){return i})),r.d(e,"a",(function(){return c})),r.d(e,"i",(function(){return o})),r.d(e,"d",(function(){return s})),r.d(e,"c",(function(){return u})),r.d(e,"j",(function(){return l})),r.d(e,"k",(function(){return f})),r.d(e,"h",(function(){return d})),r.d(e,"e",(function(){return p})),r.d(e,"b",(function(){return v}));r("d3b7"),r("25f0");var n=r("b775");function a(t){return Object(n["a"])({method:"POST",url:"/app/v1_0/authorizations",data:t})}function i(){return Object(n["a"])({method:"GET",url:"/app/v1_0/user/channels"})}function c(t){return Object(n["a"])({method:"POST",url:"/app/v1_0/user/followings",data:{target:t}})}function o(t){return Object(n["a"])({method:"DELETE",url:"/app/v1_0/user/followings/".concat(t)})}function s(){return Object(n["a"])({method:"GET",url:"/app/v1_0/user"})}function u(t){return Object(n["a"])({method:"GET",url:"/app/v1_0/user/profile"})}function l(t){return Object(n["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:t})}function f(t){return Object(n["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:t})}function d(t){return Object(n["a"])({method:"GET",url:"/app/v1_0/sms/codes/".concat(t)})}function p(t){return Object(n["a"])({method:"GET",url:"/app/v1_0/users/".concat(t)})}function v(t,e){return Object(n["a"])({method:"GET",url:"/app/v1_0/user/followers",params:e,data:{target:t.toString()}})}},d169:function(t,e,r){"use strict";var n=r("1bf8"),a=r.n(n);a.a},dbb4:function(t,e,r){var n=r("23e7"),a=r("83ab"),i=r("56ef"),c=r("fc6a"),o=r("06cf"),s=r("8418");n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,r,n=c(t),a=o.f,u=i(n),l={},f=0;while(u.length>f)r=a(n,e=u[f++]),void 0!==r&&s(l,e,r);return l}})},e382:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user-container page-container"},[r("van-nav-bar",{staticClass:"page-navbar",attrs:{fixed:"","left-arrow":"",title:t.user.name},on:{"click-left":function(e){return t.$router.back()}}}),r("user-info",{attrs:{user:t.user}}),r("loading-list",{attrs:{fn:t.getArticlesByUser},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.item;return[r("article-item",{attrs:{article:e}})]}}])})],1)},a=[],i=(r("b0c0"),r("a9e3"),r("96cf"),r("1da1")),c=r("c24f"),o=r("2423"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user-info-container"},[r("div",{staticClass:"row1"},[r("van-image",{staticClass:"col1",attrs:{fit:"cover",round:"",src:t.user.photo},on:{click:function(e){return t.onPreview(t.user.photo)}}}),r("div",{staticClass:"col2"},[r("div",{staticClass:"row1"},[r("div",{staticClass:"item"},[r("div",{staticClass:"count"},[t._v(t._s(t.user.art_count))]),r("div",{staticClass:"text"},[t._v("发布")])]),r("div",{staticClass:"item"},[r("div",{staticClass:"count"},[t._v(t._s(t.user.follow_count))]),r("div",{staticClass:"text"},[t._v("关注")])]),r("div",{staticClass:"item"},[r("div",{staticClass:"count"},[t._v(t._s(t.user.fans_count))]),r("div",{staticClass:"text"},[t._v("粉丝")])]),r("div",{staticClass:"item"},[r("div",{staticClass:"count"},[t._v(t._s(t.user.like_count))]),r("div",{staticClass:"text"},[t._v("获赞")])])]),r("div",{staticClass:"action"},[t.sessionUser&&t.user.id===t.sessionUser.user_id?r("van-button",{attrs:{type:"default",size:"small"},on:{click:function(e){return t.$router.push("/user/profile")}}},[t._v("编辑资料")]):[r("van-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$router.push("/user/chat")}}},[t._v("私信")]),r("follow-user",{attrs:{"user-id":t.user.id},model:{value:t.user.is_following,callback:function(e){t.$set(t.user,"is_following",e)},expression:"user.is_following"}})]],2)])],1),r("div",{staticClass:"intro-wrap"},[t.user.is_media?r("div",[r("span",[t._v("认证：")]),r("span",[t._v(t._s(t.user.certi))])]):t._e(),r("div",[r("span",[t._v("简介：")]),r("span",[t._v(t._s(t.user.intro))])])])])},u=[],l=(r("a4d3"),r("4de4"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),f=r("28a2"),d=r("f50e"),p=r("2f62");function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){Object(l["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var h={name:"UserInfo",props:{user:{type:Object,required:!0}},components:{FollowUser:d["a"]},computed:b({},Object(p["b"])({sessionUser:function(t){return t.user}})),methods:{onPreview:function(t){Object(f["a"])([t])}}},m=h,_=(r("8112"),r("2877")),g=Object(_["a"])(m,s,u,!1,null,"5e74a03e",null),O=g.exports,j=r("32b4"),y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article-item",on:{click:function(e){t.$router.push({name:"article",params:{articleId:t.article.art_id.toString()}})}}},[r("div",{staticClass:"author"},[r("van-image",{staticClass:"avatar",attrs:{round:"",fit:"cover",src:"https://img.yzcdn.cn/vant/cat.jpeg"}}),r("div",[r("div",{staticClass:"name"},[t._v(t._s(t.article.aut_name))]),r("div",{staticClass:"date"},[t._v(t._s(t._f("relativeTime")(t.article.pubdate)))])])],1),t.article.cover.type?r("div",{staticClass:"title-cover"},[r("div",{staticClass:"title"},[t._v(t._s(t.article.title))]),r("van-image",{staticClass:"cover",attrs:{fit:"cover",src:t.article.cover.images[0]}})],1):r("div",{staticClass:"title"},[t._v(t._s(t.article.title))]),r("div",{staticClass:"action"},[r("div",{staticClass:"action-item"},[r("van-icon",{staticClass:"comment-icon",attrs:{name:"comment-o"}}),r("span",[t._v(t._s(t.article.comm_count))])],1),r("div",{staticClass:"action-item"},[r("van-icon",{attrs:{name:"good-job-o"}}),r("span",[t._v(t._s(t.article.like_count))])],1),r("div",{staticClass:"action-item"},[r("van-icon",{attrs:{name:"star-o"}}),r("span",[t._v(t._s(t.article.collect_count))])],1)])])},w=[],E={name:"",components:{},props:{article:{type:Object,required:!0}},data:function(){return{}},computed:{},watch:{},created:function(){},methods:{}},C=E,x=(r("b941"),Object(_["a"])(C,y,w,!1,null,"785f02d9",null)),I=x.exports,k={name:"UserPage",components:{UserInfo:O,LoadingList:j["a"],ArticleItem:I},props:{userId:{type:[String,Number,Object],required:!0}},data:function(){return{user:{id:this.userId},getArticlesByUser:o["g"].bind(null,this.userId)}},computed:{},watch:{},created:function(){this.loadUser()},methods:{loadUser:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["e"])(this.userId);case 2:e=t.sent,r=e.data,this.user=r.data;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},beforeRouteLeave:function(t,e,r){var n=this.$options.name;"article"===t.name?this.$store.commit("addCachePage",n):this.$store.commit("removeCachePage",n),r()}},T=k,P=(r("d169"),Object(_["a"])(T,n,a,!1,null,"a44360c0",null));e["default"]=P.exports},e439:function(t,e,r){var n=r("23e7"),a=r("d039"),i=r("fc6a"),c=r("06cf").f,o=r("83ab"),s=a((function(){c(1)})),u=!o||s;n({target:"Object",stat:!0,forced:u,sham:!o},{getOwnPropertyDescriptor:function(t,e){return c(i(t),e)}})},f50e:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("van-button",t._b({attrs:{type:t.value?"default":"info",icon:t.value?"":"plus",size:"small",loading:t.loading},on:{click:function(e){return e.stopPropagation(),t.onFollow(e)}}},"van-button",t.$attrs,!1),[t._v(t._s(t.value?"已关注":"关注"))])},a=[],i=(r("a9e3"),r("96cf"),r("1da1")),c=r("c24f"),o={name:"FollowUser",components:{},props:{value:{type:Boolean},userId:{type:[Number,String,Object],required:!0}},data:function(){return{loading:!1}},computed:{},watch:{},created:function(){},methods:{onFollow:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.loading=!0,t.prev=1,!this.value){t.next=7;break}return t.next=5,Object(c["i"])(this.userId);case 5:t.next=9;break;case 7:return t.next=9,Object(c["a"])(this.userId);case 9:this.$emit("input",!this.value),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),t.t0.response&&400===t.t0.response.status&&this.$toast("你不能关注你自己");case 15:this.loading=!1;case 16:case"end":return t.stop()}}),t,this,[[1,12]])})));function e(){return t.apply(this,arguments)}return e}()}},s=o,u=r("2877"),l=Object(u["a"])(s,n,a,!1,null,"5bcdcce6",null);e["a"]=l.exports}}]);
//# sourceMappingURL=chunk-21dc6c8c.a55298f7.js.map